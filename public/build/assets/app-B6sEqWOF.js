function ht(s,e){return function(){return s.apply(e,arguments)}}const{toString:Kt}=Object.prototype,{getPrototypeOf:Fe}=Object,{iterator:he,toStringTag:dt}=Symbol,de=(s=>e=>{const t=Kt.call(e);return s[t]||(s[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),x=s=>(s=s.toLowerCase(),e=>de(e)===s),fe=s=>e=>typeof e===s,{isArray:q}=Array,_=fe("undefined");function W(s){return s!==null&&!_(s)&&s.constructor!==null&&!_(s.constructor)&&A(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const ft=x("ArrayBuffer");function Ht(s){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(s):e=s&&s.buffer&&ft(s.buffer),e}const zt=fe("string"),A=fe("function"),pt=fe("number"),X=s=>s!==null&&typeof s=="object",Jt=s=>s===!0||s===!1,oe=s=>{if(de(s)!=="object")return!1;const e=Fe(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(dt in s)&&!(he in s)},Wt=s=>{if(!X(s)||W(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},Xt=x("Date"),Gt=x("File"),Zt=x("Blob"),Qt=x("FileList"),Yt=s=>X(s)&&A(s.pipe),es=s=>{let e;return s&&(typeof FormData=="function"&&s instanceof FormData||A(s.append)&&((e=de(s))==="formdata"||e==="object"&&A(s.toString)&&s.toString()==="[object FormData]"))},ts=x("URLSearchParams"),[ss,rs,ns,is]=["ReadableStream","Request","Response","Headers"].map(x),os=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function G(s,e,{allOwnKeys:t=!1}={}){if(s===null||typeof s>"u")return;let r,n;if(typeof s!="object"&&(s=[s]),q(s))for(r=0,n=s.length;r<n;r++)e.call(null,s[r],r,s);else{if(W(s))return;const i=t?Object.getOwnPropertyNames(s):Object.keys(s),o=i.length;let c;for(r=0;r<o;r++)c=i[r],e.call(null,s[c],c,s)}}function mt(s,e){if(W(s))return null;e=e.toLowerCase();const t=Object.keys(s);let r=t.length,n;for(;r-- >0;)if(n=t[r],e===n.toLowerCase())return n;return null}const $=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gt=s=>!_(s)&&s!==$;function ve(){const{caseless:s,skipUndefined:e}=gt(this)&&this||{},t={},r=(n,i)=>{const o=s&&mt(t,i)||i;oe(t[o])&&oe(n)?t[o]=ve(t[o],n):oe(n)?t[o]=ve({},n):q(n)?t[o]=n.slice():(!e||!_(n))&&(t[o]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&G(arguments[n],r);return t}const as=(s,e,t,{allOwnKeys:r}={})=>(G(e,(n,i)=>{t&&A(n)?s[i]=ht(n,t):s[i]=n},{allOwnKeys:r}),s),cs=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),ls=(s,e,t,r)=>{s.prototype=Object.create(e.prototype,r),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:e.prototype}),t&&Object.assign(s.prototype,t)},us=(s,e,t,r)=>{let n,i,o;const c={};if(e=e||{},s==null)return e;do{for(n=Object.getOwnPropertyNames(s),i=n.length;i-- >0;)o=n[i],(!r||r(o,s,e))&&!c[o]&&(e[o]=s[o],c[o]=!0);s=t!==!1&&Fe(s)}while(s&&(!t||t(s,e))&&s!==Object.prototype);return e},hs=(s,e,t)=>{s=String(s),(t===void 0||t>s.length)&&(t=s.length),t-=e.length;const r=s.indexOf(e,t);return r!==-1&&r===t},ds=s=>{if(!s)return null;if(q(s))return s;let e=s.length;if(!pt(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=s[e];return t},fs=(s=>e=>s&&e instanceof s)(typeof Uint8Array<"u"&&Fe(Uint8Array)),ps=(s,e)=>{const r=(s&&s[he]).call(s);let n;for(;(n=r.next())&&!n.done;){const i=n.value;e.call(s,i[0],i[1])}},ms=(s,e)=>{let t;const r=[];for(;(t=s.exec(e))!==null;)r.push(t);return r},gs=x("HTMLFormElement"),ys=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,n){return r.toUpperCase()+n}),Ue=(({hasOwnProperty:s})=>(e,t)=>s.call(e,t))(Object.prototype),bs=x("RegExp"),yt=(s,e)=>{const t=Object.getOwnPropertyDescriptors(s),r={};G(t,(n,i)=>{let o;(o=e(n,i,s))!==!1&&(r[i]=o||n)}),Object.defineProperties(s,r)},ws=s=>{yt(s,(e,t)=>{if(A(s)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=s[t];if(A(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Es=(s,e)=>{const t={},r=n=>{n.forEach(i=>{t[i]=!0})};return q(s)?r(s):r(String(s).split(e)),t},vs=()=>{},Os=(s,e)=>s!=null&&Number.isFinite(s=+s)?s:e;function Ts(s){return!!(s&&A(s.append)&&s[dt]==="FormData"&&s[he])}const As=s=>{const e=new Array(10),t=(r,n)=>{if(X(r)){if(e.indexOf(r)>=0)return;if(W(r))return r;if(!("toJSON"in r)){e[n]=r;const i=q(r)?[]:{};return G(r,(o,c)=>{const d=t(o,n+1);!_(d)&&(i[c]=d)}),e[n]=void 0,i}}return r};return t(s,0)},Ss=x("AsyncFunction"),Cs=s=>s&&(X(s)||A(s))&&A(s.then)&&A(s.catch),bt=((s,e)=>s?setImmediate:e?((t,r)=>($.addEventListener("message",({source:n,data:i})=>{n===$&&i===t&&r.length&&r.shift()()},!1),n=>{r.push(n),$.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",A($.postMessage)),Ms=typeof queueMicrotask<"u"?queueMicrotask.bind($):typeof process<"u"&&process.nextTick||bt,Fs=s=>s!=null&&A(s[he]),a={isArray:q,isArrayBuffer:ft,isBuffer:W,isFormData:es,isArrayBufferView:Ht,isString:zt,isNumber:pt,isBoolean:Jt,isObject:X,isPlainObject:oe,isEmptyObject:Wt,isReadableStream:ss,isRequest:rs,isResponse:ns,isHeaders:is,isUndefined:_,isDate:Xt,isFile:Gt,isBlob:Zt,isRegExp:bs,isFunction:A,isStream:Yt,isURLSearchParams:ts,isTypedArray:fs,isFileList:Qt,forEach:G,merge:ve,extend:as,trim:os,stripBOM:cs,inherits:ls,toFlatObject:us,kindOf:de,kindOfTest:x,endsWith:hs,toArray:ds,forEachEntry:ps,matchAll:ms,isHTMLForm:gs,hasOwnProperty:Ue,hasOwnProp:Ue,reduceDescriptors:yt,freezeMethods:ws,toObjectSet:Es,toCamelCase:ys,noop:vs,toFiniteNumber:Os,findKey:mt,global:$,isContextDefined:gt,isSpecCompliantForm:Ts,toJSONObject:As,isAsyncFn:Ss,isThenable:Cs,setImmediate:bt,asap:Ms,isIterable:Fs};function g(s,e,t,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}a.inherits(g,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:a.toJSONObject(this.config),code:this.code,status:this.status}}});const wt=g.prototype,Et={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{Et[s]={value:s}});Object.defineProperties(g,Et);Object.defineProperty(wt,"isAxiosError",{value:!0});g.from=(s,e,t,r,n,i)=>{const o=Object.create(wt);a.toFlatObject(s,o,function(l){return l!==Error.prototype},u=>u!=="isAxiosError");const c=s&&s.message?s.message:"Error",d=e==null&&s?s.code:e;return g.call(o,c,d,t,r,n),s&&o.cause==null&&Object.defineProperty(o,"cause",{value:s,configurable:!0}),o.name=s&&s.name||"Error",i&&Object.assign(o,i),o};const xs=null;function Oe(s){return a.isPlainObject(s)||a.isArray(s)}function vt(s){return a.endsWith(s,"[]")?s.slice(0,-2):s}function Ve(s,e,t){return s?s.concat(e).map(function(n,i){return n=vt(n),!t&&i?"["+n+"]":n}).join(t?".":""):e}function Ns(s){return a.isArray(s)&&!s.some(Oe)}const ks=a.toFlatObject(a,{},null,function(e){return/^is[A-Z]/.test(e)});function pe(s,e,t){if(!a.isObject(s))throw new TypeError("target must be an object");e=e||new FormData,t=a.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,f){return!a.isUndefined(f[m])});const r=t.metaTokens,n=t.visitor||l,i=t.dots,o=t.indexes,d=(t.Blob||typeof Blob<"u"&&Blob)&&a.isSpecCompliantForm(e);if(!a.isFunction(n))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(a.isDate(h))return h.toISOString();if(a.isBoolean(h))return h.toString();if(!d&&a.isBlob(h))throw new g("Blob is not supported. Use a Buffer instead.");return a.isArrayBuffer(h)||a.isTypedArray(h)?d&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function l(h,m,f){let w=h;if(h&&!f&&typeof h=="object"){if(a.endsWith(m,"{}"))m=r?m:m.slice(0,-2),h=JSON.stringify(h);else if(a.isArray(h)&&Ns(h)||(a.isFileList(h)||a.endsWith(m,"[]"))&&(w=a.toArray(h)))return m=vt(m),w.forEach(function(E,T){!(a.isUndefined(E)||E===null)&&e.append(o===!0?Ve([m],T,i):o===null?m:m+"[]",u(E))}),!1}return Oe(h)?!0:(e.append(Ve(f,m,i),u(h)),!1)}const p=[],y=Object.assign(ks,{defaultVisitor:l,convertValue:u,isVisitable:Oe});function v(h,m){if(!a.isUndefined(h)){if(p.indexOf(h)!==-1)throw Error("Circular reference detected in "+m.join("."));p.push(h),a.forEach(h,function(w,C){(!(a.isUndefined(w)||w===null)&&n.call(e,w,a.isString(C)?C.trim():C,m,y))===!0&&v(w,m?m.concat(C):[C])}),p.pop()}}if(!a.isObject(s))throw new TypeError("data must be an object");return v(s),e}function _e(s){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function xe(s,e){this._pairs=[],s&&pe(s,this,e)}const Ot=xe.prototype;Ot.append=function(e,t){this._pairs.push([e,t])};Ot.toString=function(e){const t=e?function(r){return e.call(this,r,_e)}:_e;return this._pairs.map(function(n){return t(n[0])+"="+t(n[1])},"").join("&")};function Rs(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Tt(s,e,t){if(!e)return s;const r=t&&t.encode||Rs;a.isFunction(t)&&(t={serialize:t});const n=t&&t.serialize;let i;if(n?i=n(e,t):i=a.isURLSearchParams(e)?e.toString():new xe(e,t).toString(r),i){const o=s.indexOf("#");o!==-1&&(s=s.slice(0,o)),s+=(s.indexOf("?")===-1?"?":"&")+i}return s}class qe{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){a.forEach(this.handlers,function(r){r!==null&&e(r)})}}const At={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ls=typeof URLSearchParams<"u"?URLSearchParams:xe,Bs=typeof FormData<"u"?FormData:null,Ps=typeof Blob<"u"?Blob:null,Ds={isBrowser:!0,classes:{URLSearchParams:Ls,FormData:Bs,Blob:Ps},protocols:["http","https","file","blob","url","data"]},Ne=typeof window<"u"&&typeof document<"u",Te=typeof navigator=="object"&&navigator||void 0,$s=Ne&&(!Te||["ReactNative","NativeScript","NS"].indexOf(Te.product)<0),Is=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",js=Ne&&window.location.href||"http://localhost",Us=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ne,hasStandardBrowserEnv:$s,hasStandardBrowserWebWorkerEnv:Is,navigator:Te,origin:js},Symbol.toStringTag,{value:"Module"})),O={...Us,...Ds};function Vs(s,e){return pe(s,new O.classes.URLSearchParams,{visitor:function(t,r,n,i){return O.isNode&&a.isBuffer(t)?(this.append(r,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function _s(s){return a.matchAll(/\w+|\[(\w*)]/g,s).map(e=>e[0]==="[]"?"":e[1]||e[0])}function qs(s){const e={},t=Object.keys(s);let r;const n=t.length;let i;for(r=0;r<n;r++)i=t[r],e[i]=s[i];return e}function St(s){function e(t,r,n,i){let o=t[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),d=i>=t.length;return o=!o&&a.isArray(n)?n.length:o,d?(a.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!c):((!n[o]||!a.isObject(n[o]))&&(n[o]=[]),e(t,r,n[o],i)&&a.isArray(n[o])&&(n[o]=qs(n[o])),!c)}if(a.isFormData(s)&&a.isFunction(s.entries)){const t={};return a.forEachEntry(s,(r,n)=>{e(_s(r),n,t,0)}),t}return null}function Ks(s,e,t){if(a.isString(s))try{return(e||JSON.parse)(s),a.trim(s)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(s)}const Z={transitional:At,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,i=a.isObject(e);if(i&&a.isHTMLForm(e)&&(e=new FormData(e)),a.isFormData(e))return n?JSON.stringify(St(e)):e;if(a.isArrayBuffer(e)||a.isBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e)||a.isReadableStream(e))return e;if(a.isArrayBufferView(e))return e.buffer;if(a.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Vs(e,this.formSerializer).toString();if((c=a.isFileList(e))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return pe(c?{"files[]":e}:e,d&&new d,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),Ks(e)):e}],transformResponse:[function(e){const t=this.transitional||Z.transitional,r=t&&t.forcedJSONParsing,n=this.responseType==="json";if(a.isResponse(e)||a.isReadableStream(e))return e;if(e&&a.isString(e)&&(r&&!this.responseType||n)){const o=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?g.from(c,g.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:O.classes.FormData,Blob:O.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};a.forEach(["delete","get","head","post","put","patch"],s=>{Z.headers[s]={}});const Hs=a.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zs=s=>{const e={};let t,r,n;return s&&s.split(`
`).forEach(function(o){n=o.indexOf(":"),t=o.substring(0,n).trim().toLowerCase(),r=o.substring(n+1).trim(),!(!t||e[t]&&Hs[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},Ke=Symbol("internals");function z(s){return s&&String(s).trim().toLowerCase()}function ae(s){return s===!1||s==null?s:a.isArray(s)?s.map(ae):String(s)}function Js(s){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(s);)e[r[1]]=r[2];return e}const Ws=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function be(s,e,t,r,n){if(a.isFunction(r))return r.call(this,e,t);if(n&&(e=t),!!a.isString(e)){if(a.isString(r))return e.indexOf(r)!==-1;if(a.isRegExp(r))return r.test(e)}}function Xs(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function Gs(s,e){const t=a.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(s,r+t,{value:function(n,i,o){return this[r].call(this,e,n,i,o)},configurable:!0})})}let S=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function i(c,d,u){const l=z(d);if(!l)throw new Error("header name must be a non-empty string");const p=a.findKey(n,l);(!p||n[p]===void 0||u===!0||u===void 0&&n[p]!==!1)&&(n[p||d]=ae(c))}const o=(c,d)=>a.forEach(c,(u,l)=>i(u,l,d));if(a.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(a.isString(e)&&(e=e.trim())&&!Ws(e))o(zs(e),t);else if(a.isObject(e)&&a.isIterable(e)){let c={},d,u;for(const l of e){if(!a.isArray(l))throw TypeError("Object iterator must return a key-value pair");c[u=l[0]]=(d=c[u])?a.isArray(d)?[...d,l[1]]:[d,l[1]]:l[1]}o(c,t)}else e!=null&&i(t,e,r);return this}get(e,t){if(e=z(e),e){const r=a.findKey(this,e);if(r){const n=this[r];if(!t)return n;if(t===!0)return Js(n);if(a.isFunction(t))return t.call(this,n,r);if(a.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=z(e),e){const r=a.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||be(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let n=!1;function i(o){if(o=z(o),o){const c=a.findKey(r,o);c&&(!t||be(r,r[c],c,t))&&(delete r[c],n=!0)}}return a.isArray(e)?e.forEach(i):i(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const i=t[r];(!e||be(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){const t=this,r={};return a.forEach(this,(n,i)=>{const o=a.findKey(r,i);if(o){t[o]=ae(n),delete t[i];return}const c=e?Xs(i):String(i).trim();c!==i&&delete t[i],t[c]=ae(n),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return a.forEach(this,(r,n)=>{r!=null&&r!==!1&&(t[n]=e&&a.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(n=>r.set(n)),r}static accessor(e){const r=(this[Ke]=this[Ke]={accessors:{}}).accessors,n=this.prototype;function i(o){const c=z(o);r[c]||(Gs(n,o),r[c]=!0)}return a.isArray(e)?e.forEach(i):i(e),this}};S.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);a.reduceDescriptors(S.prototype,({value:s},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>s,set(r){this[t]=r}}});a.freezeMethods(S);function we(s,e){const t=this||Z,r=e||t,n=S.from(r.headers);let i=r.data;return a.forEach(s,function(c){i=c.call(t,i,n.normalize(),e?e.status:void 0)}),n.normalize(),i}function Ct(s){return!!(s&&s.__CANCEL__)}function K(s,e,t){g.call(this,s??"canceled",g.ERR_CANCELED,e,t),this.name="CanceledError"}a.inherits(K,g,{__CANCEL__:!0});function Mt(s,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?s(t):e(new g("Request failed with status code "+t.status,[g.ERR_BAD_REQUEST,g.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Zs(s){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return e&&e[1]||""}function Qs(s,e){s=s||10;const t=new Array(s),r=new Array(s);let n=0,i=0,o;return e=e!==void 0?e:1e3,function(d){const u=Date.now(),l=r[i];o||(o=u),t[n]=d,r[n]=u;let p=i,y=0;for(;p!==n;)y+=t[p++],p=p%s;if(n=(n+1)%s,n===i&&(i=(i+1)%s),u-o<e)return;const v=l&&u-l;return v?Math.round(y*1e3/v):void 0}}function Ys(s,e){let t=0,r=1e3/e,n,i;const o=(u,l=Date.now())=>{t=l,n=null,i&&(clearTimeout(i),i=null),s(...u)};return[(...u)=>{const l=Date.now(),p=l-t;p>=r?o(u,l):(n=u,i||(i=setTimeout(()=>{i=null,o(n)},r-p)))},()=>n&&o(n)]}const le=(s,e,t=3)=>{let r=0;const n=Qs(50,250);return Ys(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,d=o-r,u=n(d),l=o<=c;r=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:d,rate:u||void 0,estimated:u&&c&&l?(c-o)/u:void 0,event:i,lengthComputable:c!=null,[e?"download":"upload"]:!0};s(p)},t)},He=(s,e)=>{const t=s!=null;return[r=>e[0]({lengthComputable:t,total:s,loaded:r}),e[1]]},ze=s=>(...e)=>a.asap(()=>s(...e)),er=O.hasStandardBrowserEnv?((s,e)=>t=>(t=new URL(t,O.origin),s.protocol===t.protocol&&s.host===t.host&&(e||s.port===t.port)))(new URL(O.origin),O.navigator&&/(msie|trident)/i.test(O.navigator.userAgent)):()=>!0,tr=O.hasStandardBrowserEnv?{write(s,e,t,r,n,i,o){if(typeof document>"u")return;const c=[`${s}=${encodeURIComponent(e)}`];a.isNumber(t)&&c.push(`expires=${new Date(t).toUTCString()}`),a.isString(r)&&c.push(`path=${r}`),a.isString(n)&&c.push(`domain=${n}`),i===!0&&c.push("secure"),a.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(s){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function sr(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function rr(s,e){return e?s.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):s}function Ft(s,e,t){let r=!sr(e);return s&&(r||t==!1)?rr(s,e):e}const Je=s=>s instanceof S?{...s}:s;function U(s,e){e=e||{};const t={};function r(u,l,p,y){return a.isPlainObject(u)&&a.isPlainObject(l)?a.merge.call({caseless:y},u,l):a.isPlainObject(l)?a.merge({},l):a.isArray(l)?l.slice():l}function n(u,l,p,y){if(a.isUndefined(l)){if(!a.isUndefined(u))return r(void 0,u,p,y)}else return r(u,l,p,y)}function i(u,l){if(!a.isUndefined(l))return r(void 0,l)}function o(u,l){if(a.isUndefined(l)){if(!a.isUndefined(u))return r(void 0,u)}else return r(void 0,l)}function c(u,l,p){if(p in e)return r(u,l);if(p in s)return r(void 0,u)}const d={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(u,l,p)=>n(Je(u),Je(l),p,!0)};return a.forEach(Object.keys({...s,...e}),function(l){const p=d[l]||n,y=p(s[l],e[l],l);a.isUndefined(y)&&p!==c||(t[l]=y)}),t}const xt=s=>{const e=U({},s);let{data:t,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:c}=e;if(e.headers=o=S.from(o),e.url=Tt(Ft(e.baseURL,e.url,e.allowAbsoluteUrls),s.params,s.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),a.isFormData(t)){if(O.hasStandardBrowserEnv||O.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(a.isFunction(t.getHeaders)){const d=t.getHeaders(),u=["content-type","content-length"];Object.entries(d).forEach(([l,p])=>{u.includes(l.toLowerCase())&&o.set(l,p)})}}if(O.hasStandardBrowserEnv&&(r&&a.isFunction(r)&&(r=r(e)),r||r!==!1&&er(e.url))){const d=n&&i&&tr.read(i);d&&o.set(n,d)}return e},nr=typeof XMLHttpRequest<"u",ir=nr&&function(s){return new Promise(function(t,r){const n=xt(s);let i=n.data;const o=S.from(n.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:u}=n,l,p,y,v,h;function m(){v&&v(),h&&h(),n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let f=new XMLHttpRequest;f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout;function w(){if(!f)return;const E=S.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),F={data:!c||c==="text"||c==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:E,config:s,request:f};Mt(function(M){t(M),m()},function(M){r(M),m()},F),f=null}"onloadend"in f?f.onloadend=w:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(w)},f.onabort=function(){f&&(r(new g("Request aborted",g.ECONNABORTED,s,f)),f=null)},f.onerror=function(T){const F=T&&T.message?T.message:"Network Error",P=new g(F,g.ERR_NETWORK,s,f);P.event=T||null,r(P),f=null},f.ontimeout=function(){let T=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const F=n.transitional||At;n.timeoutErrorMessage&&(T=n.timeoutErrorMessage),r(new g(T,F.clarifyTimeoutError?g.ETIMEDOUT:g.ECONNABORTED,s,f)),f=null},i===void 0&&o.setContentType(null),"setRequestHeader"in f&&a.forEach(o.toJSON(),function(T,F){f.setRequestHeader(F,T)}),a.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),c&&c!=="json"&&(f.responseType=n.responseType),u&&([y,h]=le(u,!0),f.addEventListener("progress",y)),d&&f.upload&&([p,v]=le(d),f.upload.addEventListener("progress",p),f.upload.addEventListener("loadend",v)),(n.cancelToken||n.signal)&&(l=E=>{f&&(r(!E||E.type?new K(null,s,f):E),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const C=Zs(n.url);if(C&&O.protocols.indexOf(C)===-1){r(new g("Unsupported protocol "+C+":",g.ERR_BAD_REQUEST,s));return}f.send(i||null)})},or=(s,e)=>{const{length:t}=s=s?s.filter(Boolean):[];if(e||t){let r=new AbortController,n;const i=function(u){if(!n){n=!0,c();const l=u instanceof Error?u:this.reason;r.abort(l instanceof g?l:new K(l instanceof Error?l.message:l))}};let o=e&&setTimeout(()=>{o=null,i(new g(`timeout ${e} of ms exceeded`,g.ETIMEDOUT))},e);const c=()=>{s&&(o&&clearTimeout(o),o=null,s.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),s=null)};s.forEach(u=>u.addEventListener("abort",i));const{signal:d}=r;return d.unsubscribe=()=>a.asap(c),d}},ar=function*(s,e){let t=s.byteLength;if(t<e){yield s;return}let r=0,n;for(;r<t;)n=r+e,yield s.slice(r,n),r=n},cr=async function*(s,e){for await(const t of lr(s))yield*ar(t,e)},lr=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const e=s.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},We=(s,e,t,r)=>{const n=cr(s,e);let i=0,o,c=d=>{o||(o=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:u,value:l}=await n.next();if(u){c(),d.close();return}let p=l.byteLength;if(t){let y=i+=p;t(y)}d.enqueue(new Uint8Array(l))}catch(u){throw c(u),u}},cancel(d){return c(d),n.return()}},{highWaterMark:2})},Xe=64*1024,{isFunction:ne}=a,ur=(({Request:s,Response:e})=>({Request:s,Response:e}))(a.global),{ReadableStream:Ge,TextEncoder:Ze}=a.global,Qe=(s,...e)=>{try{return!!s(...e)}catch{return!1}},hr=s=>{s=a.merge.call({skipUndefined:!0},ur,s);const{fetch:e,Request:t,Response:r}=s,n=e?ne(e):typeof fetch=="function",i=ne(t),o=ne(r);if(!n)return!1;const c=n&&ne(Ge),d=n&&(typeof Ze=="function"?(h=>m=>h.encode(m))(new Ze):async h=>new Uint8Array(await new t(h).arrayBuffer())),u=i&&c&&Qe(()=>{let h=!1;const m=new t(O.origin,{body:new Ge,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!m}),l=o&&c&&Qe(()=>a.isReadableStream(new r("").body)),p={stream:l&&(h=>h.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!p[h]&&(p[h]=(m,f)=>{let w=m&&m[h];if(w)return w.call(m);throw new g(`Response type '${h}' is not supported`,g.ERR_NOT_SUPPORT,f)})});const y=async h=>{if(h==null)return 0;if(a.isBlob(h))return h.size;if(a.isSpecCompliantForm(h))return(await new t(O.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(a.isArrayBufferView(h)||a.isArrayBuffer(h))return h.byteLength;if(a.isURLSearchParams(h)&&(h=h+""),a.isString(h))return(await d(h)).byteLength},v=async(h,m)=>{const f=a.toFiniteNumber(h.getContentLength());return f??y(m)};return async h=>{let{url:m,method:f,data:w,signal:C,cancelToken:E,timeout:T,onDownloadProgress:F,onUploadProgress:P,responseType:M,headers:ge,withCredentials:te="same-origin",fetchOptions:Be}=xt(h),Pe=e||fetch;M=M?(M+"").toLowerCase():"text";let se=or([C,E&&E.toAbortSignal()],T),H=null;const D=se&&se.unsubscribe&&(()=>{se.unsubscribe()});let De;try{if(P&&u&&f!=="get"&&f!=="head"&&(De=await v(ge,w))!==0){let L=new t(m,{method:"POST",body:w,duplex:"half"}),V;if(a.isFormData(w)&&(V=L.headers.get("content-type"))&&ge.setContentType(V),L.body){const[ye,re]=He(De,le(ze(P)));w=We(L.body,Xe,ye,re)}}a.isString(te)||(te=te?"include":"omit");const N=i&&"credentials"in t.prototype,$e={...Be,signal:se,method:f.toUpperCase(),headers:ge.normalize().toJSON(),body:w,duplex:"half",credentials:N?te:void 0};H=i&&new t(m,$e);let R=await(i?Pe(H,Be):Pe(m,$e));const Ie=l&&(M==="stream"||M==="response");if(l&&(F||Ie&&D)){const L={};["status","statusText","headers"].forEach(je=>{L[je]=R[je]});const V=a.toFiniteNumber(R.headers.get("content-length")),[ye,re]=F&&He(V,le(ze(F),!0))||[];R=new r(We(R.body,Xe,ye,()=>{re&&re(),D&&D()}),L)}M=M||"text";let qt=await p[a.findKey(p,M)||"text"](R,h);return!Ie&&D&&D(),await new Promise((L,V)=>{Mt(L,V,{data:qt,headers:S.from(R.headers),status:R.status,statusText:R.statusText,config:h,request:H})})}catch(N){throw D&&D(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new g("Network Error",g.ERR_NETWORK,h,H),{cause:N.cause||N}):g.from(N,N&&N.code,h,H)}}},dr=new Map,Nt=s=>{let e=s&&s.env||{};const{fetch:t,Request:r,Response:n}=e,i=[r,n,t];let o=i.length,c=o,d,u,l=dr;for(;c--;)d=i[c],u=l.get(d),u===void 0&&l.set(d,u=c?new Map:hr(e)),l=u;return u};Nt();const ke={http:xs,xhr:ir,fetch:{get:Nt}};a.forEach(ke,(s,e)=>{if(s){try{Object.defineProperty(s,"name",{value:e})}catch{}Object.defineProperty(s,"adapterName",{value:e})}});const Ye=s=>`- ${s}`,fr=s=>a.isFunction(s)||s===null||s===!1;function pr(s,e){s=a.isArray(s)?s:[s];const{length:t}=s;let r,n;const i={};for(let o=0;o<t;o++){r=s[o];let c;if(n=r,!fr(r)&&(n=ke[(c=String(r)).toLowerCase()],n===void 0))throw new g(`Unknown adapter '${c}'`);if(n&&(a.isFunction(n)||(n=n.get(e))))break;i[c||"#"+o]=n}if(!n){const o=Object.entries(i).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=t?o.length>1?`since :
`+o.map(Ye).join(`
`):" "+Ye(o[0]):"as no adapter specified";throw new g("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n}const kt={getAdapter:pr,adapters:ke};function Ee(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new K(null,s)}function et(s){return Ee(s),s.headers=S.from(s.headers),s.data=we.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),kt.getAdapter(s.adapter||Z.adapter,s)(s).then(function(r){return Ee(s),r.data=we.call(s,s.transformResponse,r),r.headers=S.from(r.headers),r},function(r){return Ct(r)||(Ee(s),r&&r.response&&(r.response.data=we.call(s,s.transformResponse,r.response),r.response.headers=S.from(r.response.headers))),Promise.reject(r)})}const Rt="1.13.2",me={};["object","boolean","number","function","string","symbol"].forEach((s,e)=>{me[s]=function(r){return typeof r===s||"a"+(e<1?"n ":" ")+s}});const tt={};me.transitional=function(e,t,r){function n(i,o){return"[Axios v"+Rt+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,c)=>{if(e===!1)throw new g(n(o," has been removed"+(t?" in "+t:"")),g.ERR_DEPRECATED);return t&&!tt[o]&&(tt[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,o,c):!0}};me.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function mr(s,e,t){if(typeof s!="object")throw new g("options must be an object",g.ERR_BAD_OPTION_VALUE);const r=Object.keys(s);let n=r.length;for(;n-- >0;){const i=r[n],o=e[i];if(o){const c=s[i],d=c===void 0||o(c,i,s);if(d!==!0)throw new g("option "+i+" must be "+d,g.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new g("Unknown option "+i,g.ERR_BAD_OPTION)}}const ce={assertOptions:mr,validators:me},k=ce.validators;let I=class{constructor(e){this.defaults=e||{},this.interceptors={request:new qe,response:new qe}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=U(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:i}=t;r!==void 0&&ce.assertOptions(r,{silentJSONParsing:k.transitional(k.boolean),forcedJSONParsing:k.transitional(k.boolean),clarifyTimeoutError:k.transitional(k.boolean)},!1),n!=null&&(a.isFunction(n)?t.paramsSerializer={serialize:n}:ce.assertOptions(n,{encode:k.function,serialize:k.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ce.assertOptions(t,{baseUrl:k.spelling("baseURL"),withXsrfToken:k.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&a.merge(i.common,i[t.method]);i&&a.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),t.headers=S.concat(o,i);const c=[];let d=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(t)===!1||(d=d&&m.synchronous,c.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let l,p=0,y;if(!d){const h=[et.bind(this),void 0];for(h.unshift(...c),h.push(...u),y=h.length,l=Promise.resolve(t);p<y;)l=l.then(h[p++],h[p++]);return l}y=c.length;let v=t;for(;p<y;){const h=c[p++],m=c[p++];try{v=h(v)}catch(f){m.call(this,f);break}}try{l=et.call(this,v)}catch(h){return Promise.reject(h)}for(p=0,y=u.length;p<y;)l=l.then(u[p++],u[p++]);return l}getUri(e){e=U(this.defaults,e);const t=Ft(e.baseURL,e.url,e.allowAbsoluteUrls);return Tt(t,e.params,e.paramsSerializer)}};a.forEach(["delete","get","head","options"],function(e){I.prototype[e]=function(t,r){return this.request(U(r||{},{method:e,url:t,data:(r||{}).data}))}});a.forEach(["post","put","patch"],function(e){function t(r){return function(i,o,c){return this.request(U(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}I.prototype[e]=t(),I.prototype[e+"Form"]=t(!0)});let gr=class Lt{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(c=>{r.subscribe(c),i=c}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,c){r.reason||(r.reason=new K(i,o,c),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Lt(function(n){e=n}),cancel:e}}};function yr(s){return function(t){return s.apply(null,t)}}function br(s){return a.isObject(s)&&s.isAxiosError===!0}const Ae={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ae).forEach(([s,e])=>{Ae[e]=s});function Bt(s){const e=new I(s),t=ht(I.prototype.request,e);return a.extend(t,I.prototype,e,{allOwnKeys:!0}),a.extend(t,e,null,{allOwnKeys:!0}),t.create=function(n){return Bt(U(s,n))},t}const b=Bt(Z);b.Axios=I;b.CanceledError=K;b.CancelToken=gr;b.isCancel=Ct;b.VERSION=Rt;b.toFormData=pe;b.AxiosError=g;b.Cancel=b.CanceledError;b.all=function(e){return Promise.all(e)};b.spread=yr;b.isAxiosError=br;b.mergeConfig=U;b.AxiosHeaders=S;b.formToJSON=s=>St(a.isHTMLForm(s)?new FormData(s):s);b.getAdapter=kt.getAdapter;b.HttpStatusCode=Ae;b.default=b;const{Axios:Pn,AxiosError:Dn,CanceledError:$n,isCancel:In,CancelToken:jn,VERSION:Un,all:Vn,Cancel:_n,isAxiosError:qn,spread:Kn,toFormData:Hn,AxiosHeaders:zn,HttpStatusCode:Jn,formToJSON:Wn,getAdapter:Xn,mergeConfig:Gn}=b;window.axios=b;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";class wr{constructor(e,t,r){this.eventTarget=e,this.eventName=t,this.eventOptions=r,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){const t=Er(e);for(const r of this.bindings){if(t.immediatePropagationStopped)break;r.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{const r=e.index,n=t.index;return r<n?-1:r>n?1:0})}}function Er(s){if("immediatePropagationStopped"in s)return s;{const{stopImmediatePropagation:e}=s;return Object.assign(s,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}class vr{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,r={}){this.application.handleError(e,`Error ${t}`,r)}clearEventListenersForBinding(e){const t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){const{eventTarget:t,eventName:r,eventOptions:n}=e,i=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(r,n);i.delete(o),i.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){const{eventTarget:t,eventName:r,eventOptions:n}=e;return this.fetchEventListener(t,r,n)}fetchEventListener(e,t,r){const n=this.fetchEventListenerMapForEventTarget(e),i=this.cacheKey(t,r);let o=n.get(i);return o||(o=this.createEventListener(e,t,r),n.set(i,o)),o}createEventListener(e,t,r){const n=new wr(e,t,r);return this.started&&n.connect(),n}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){const r=[e];return Object.keys(t).sort().forEach(n=>{r.push(`${t[n]?"":"!"}${n}`)}),r.join(":")}}const Or={stop({event:s,value:e}){return e&&s.stopPropagation(),!0},prevent({event:s,value:e}){return e&&s.preventDefault(),!0},self({event:s,value:e,element:t}){return e?t===s.target:!0}},Tr=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Ar(s){const t=s.trim().match(Tr)||[];let r=t[2],n=t[3];return n&&!["keydown","keyup","keypress"].includes(r)&&(r+=`.${n}`,n=""),{eventTarget:Sr(t[4]),eventName:r,eventOptions:t[7]?Cr(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||n}}function Sr(s){if(s=="window")return window;if(s=="document")return document}function Cr(s){return s.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function Mr(s){if(s==window)return"window";if(s==document)return"document"}function Re(s){return s.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function Se(s){return Re(s.replace(/--/g,"-").replace(/__/g,"_"))}function Q(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Pt(s){return s.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function Fr(s){return s.match(/[^\s]+/g)||[]}function st(s){return s!=null}function Ce(s,e){return Object.prototype.hasOwnProperty.call(s,e)}const rt=["meta","ctrl","alt","shift"];class xr{constructor(e,t,r,n){this.element=e,this.index=t,this.eventTarget=r.eventTarget||e,this.eventName=r.eventName||Nr(e)||ie("missing event name"),this.eventOptions=r.eventOptions||{},this.identifier=r.identifier||ie("missing identifier"),this.methodName=r.methodName||ie("missing method name"),this.keyFilter=r.keyFilter||"",this.schema=n}static forToken(e,t){return new this(e.element,e.index,Ar(e.content),t)}toString(){const e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;const t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;const r=t.filter(n=>!rt.includes(n))[0];return r?(Ce(this.keyMappings,r)||ie(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[r].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;const t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){const e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:r,value:n}of Array.from(this.element.attributes)){const i=r.match(t),o=i&&i[1];o&&(e[Re(o)]=kr(n))}return e}get eventTargetName(){return Mr(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){const[r,n,i,o]=rt.map(c=>t.includes(c));return e.metaKey!==r||e.ctrlKey!==n||e.altKey!==i||e.shiftKey!==o}}const nt={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:s=>s.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function Nr(s){const e=s.tagName.toLowerCase();if(e in nt)return nt[e](s)}function ie(s){throw new Error(s)}function kr(s){try{return JSON.parse(s)}catch{return s}}class Rr{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){const t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){const e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){const{element:t}=this.action,{actionDescriptorFilters:r}=this.context.application,{controller:n}=this.context;let i=!0;for(const[o,c]of Object.entries(this.eventOptions))if(o in r){const d=r[o];i=i&&d({name:o,value:c,event:e,element:t,controller:n})}else continue;return i}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){const{target:t,currentTarget:r}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:r,action:this.methodName})}catch(n){const{identifier:i,controller:o,element:c,index:d}=this,u={identifier:i,controller:o,element:c,index:d,event:e};this.context.handleError(n,`invoking action "${this.action}"`,u)}}willBeInvokedByEvent(e){const t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class Dt{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(r=>this.processMutations(r))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const e=new Set(this.matchElementsInTree());for(const t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(const t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(const t of Array.from(e)){const r=this.elementFromNode(t);r&&this.processTree(r,this.removeElement)}}processAddedNodes(e){for(const t of Array.from(e)){const r=this.elementFromNode(t);r&&this.elementIsActive(r)&&this.processTree(r,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(const r of this.matchElementsInTree(e))t.call(this,r)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}class $t{constructor(e,t,r){this.attributeName=t,this.delegate=r,this.elementObserver=new Dt(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){const t=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(this.selector));return t.concat(r)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}function Lr(s,e,t){It(s,e).add(t)}function Br(s,e,t){It(s,e).delete(t),Pr(s,e)}function It(s,e){let t=s.get(e);return t||(t=new Set,s.set(e,t)),t}function Pr(s,e){const t=s.get(e);t!=null&&t.size==0&&s.delete(e)}class j{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,r)=>t.concat(Array.from(r)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,r)=>t+r.size,0)}add(e,t){Lr(this.valuesByKey,e,t)}delete(e,t){Br(this.valuesByKey,e,t)}has(e,t){const r=this.valuesByKey.get(e);return r!=null&&r.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(r=>r.has(e))}getValuesForKey(e){const t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,r])=>r.has(e)).map(([t,r])=>t)}}class Dr{constructor(e,t,r,n){this._selector=t,this.details=n,this.elementObserver=new Dt(e,this),this.delegate=r,this.matchesByElement=new j}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){const{selector:t}=this;if(t){const r=e.matches(t);return this.delegate.selectorMatchElement?r&&this.delegate.selectorMatchElement(e,this.details):r}else return!1}matchElementsInTree(e){const{selector:t}=this;if(t){const r=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(t)).filter(i=>this.matchElement(i));return r.concat(n)}else return[]}elementMatched(e){const{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){const t=this.matchesByElement.getKeysForValue(e);for(const r of t)this.selectorUnmatched(e,r)}elementAttributeChanged(e,t){const{selector:r}=this;if(r){const n=this.matchElement(e),i=this.matchesByElement.has(r,e);n&&!i?this.selectorMatched(e,r):!n&&i&&this.selectorUnmatched(e,r)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}}class $r{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(r=>this.processMutations(r))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){const t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){const r=this.delegate.getStringMapKeyForAttribute(e);if(r!=null){this.stringMap.has(e)||this.stringMapKeyAdded(r,e);const n=this.element.getAttribute(e);if(this.stringMap.get(e)!=n&&this.stringMapValueChanged(n,r,t),n==null){const i=this.stringMap.get(e);this.stringMap.delete(e),i&&this.stringMapKeyRemoved(r,e,i)}else this.stringMap.set(e,n)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,r){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,r)}stringMapKeyRemoved(e,t,r){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,r)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class jt{constructor(e,t,r){this.attributeObserver=new $t(e,t,this),this.delegate=r,this.tokensByElement=new j}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){const[t,r]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(r)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){const t=this.tokensByElement.getValuesForKey(e),r=this.readTokensForElement(e),n=jr(t,r).findIndex(([i,o])=>!Ur(i,o));return n==-1?[[],[]]:[t.slice(n),r.slice(n)]}readTokensForElement(e){const t=this.attributeName,r=e.getAttribute(t)||"";return Ir(r,e,t)}}function Ir(s,e,t){return s.trim().split(/\s+/).filter(r=>r.length).map((r,n)=>({element:e,attributeName:t,content:r,index:n}))}function jr(s,e){const t=Math.max(s.length,e.length);return Array.from({length:t},(r,n)=>[s[n],e[n]])}function Ur(s,e){return s&&e&&s.index==e.index&&s.content==e.content}class Ut{constructor(e,t,r){this.tokenListObserver=new jt(e,t,this),this.delegate=r,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){const{element:t}=e,{value:r}=this.fetchParseResultForToken(e);r&&(this.fetchValuesByTokenForElement(t).set(e,r),this.delegate.elementMatchedValue(t,r))}tokenUnmatched(e){const{element:t}=e,{value:r}=this.fetchParseResultForToken(e);r&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,r))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}}class Vr{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Ut(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){const t=new Rr(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){const t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){const t=xr.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}}class _r{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new $r(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){const r=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,r.writer(this.receiver[e]),r.writer(r.defaultValue))}stringMapValueChanged(e,t,r){const n=this.valueDescriptorNameMap[t];e!==null&&(r===null&&(r=n.writer(n.defaultValue)),this.invokeChangedCallback(t,e,r))}stringMapKeyRemoved(e,t,r){const n=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,n.writer(this.receiver[e]),r):this.invokeChangedCallback(e,n.writer(n.defaultValue),r)}invokeChangedCallbacksForDefaultValues(){for(const{key:e,name:t,defaultValue:r,writer:n}of this.valueDescriptors)r!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,n(r),void 0)}invokeChangedCallback(e,t,r){const n=`${e}Changed`,i=this.receiver[n];if(typeof i=="function"){const o=this.valueDescriptorNameMap[e];try{const c=o.reader(t);let d=r;r&&(d=o.reader(r)),i.call(this.receiver,c,d)}catch(c){throw c instanceof TypeError&&(c.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${c.message}`),c}}}get valueDescriptors(){const{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){const e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{const r=this.valueDescriptorMap[t];e[r.name]=r}),e}hasValue(e){const t=this.valueDescriptorNameMap[e],r=`has${Q(t.name)}`;return this.receiver[r]}}class qr{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new j}start(){this.tokenListObserver||(this.tokenListObserver=new jt(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var r;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(r=this.tokenListObserver)===null||r===void 0||r.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var r;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(r=this.tokenListObserver)===null||r===void 0||r.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(const e of this.targetsByName.keys)for(const t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function Y(s,e){const t=Vt(s);return Array.from(t.reduce((r,n)=>(Hr(n,e).forEach(i=>r.add(i)),r),new Set))}function Kr(s,e){return Vt(s).reduce((r,n)=>(r.push(...zr(n,e)),r),[])}function Vt(s){const e=[];for(;s;)e.push(s),s=Object.getPrototypeOf(s);return e.reverse()}function Hr(s,e){const t=s[e];return Array.isArray(t)?t:[]}function zr(s,e){const t=s[e];return t?Object.keys(t).map(r=>[r,t[r]]):[]}class Jr{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new j,this.outletElementsByName=new j,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:r}){const n=this.getOutlet(e,r);n&&this.connectOutlet(n,e,r)}selectorUnmatched(e,t,{outletName:r}){const n=this.getOutletFromMap(e,r);n&&this.disconnectOutlet(n,e,r)}selectorMatchElement(e,{outletName:t}){const r=this.selector(t),n=this.hasOutlet(e,t),i=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return r?n&&i&&e.matches(r):!1}elementMatchedAttribute(e,t){const r=this.getOutletNameFromOutletAttributeName(t);r&&this.updateSelectorObserverForOutlet(r)}elementAttributeValueChanged(e,t){const r=this.getOutletNameFromOutletAttributeName(t);r&&this.updateSelectorObserverForOutlet(r)}elementUnmatchedAttribute(e,t){const r=this.getOutletNameFromOutletAttributeName(t);r&&this.updateSelectorObserverForOutlet(r)}connectOutlet(e,t,r){var n;this.outletElementsByName.has(r,t)||(this.outletsByName.add(r,e),this.outletElementsByName.add(r,t),(n=this.selectorObserverMap.get(r))===null||n===void 0||n.pause(()=>this.delegate.outletConnected(e,t,r)))}disconnectOutlet(e,t,r){var n;this.outletElementsByName.has(r,t)&&(this.outletsByName.delete(r,e),this.outletElementsByName.delete(r,t),(n=this.selectorObserverMap.get(r))===null||n===void 0||n.pause(()=>this.delegate.outletDisconnected(e,t,r)))}disconnectAllOutlets(){for(const e of this.outletElementsByName.keys)for(const t of this.outletElementsByName.getValuesForKey(e))for(const r of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(r,t,e)}updateSelectorObserverForOutlet(e){const t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){const t=this.selector(e),r=new Dr(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,r),r.start()}setupAttributeObserverForOutlet(e){const t=this.attributeNameForOutletName(e),r=new $t(this.scope.element,t,this);this.attributeObserverMap.set(e,r),r.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){const e=new j;return this.router.modules.forEach(t=>{const r=t.definition.controllerConstructor;Y(r,"outlets").forEach(i=>e.add(i,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(r=>r.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class Wr{constructor(e,t){this.logDebugActivity=(r,n={})=>{const{identifier:i,controller:o,element:c}=this;n=Object.assign({identifier:i,controller:o,element:c},n),this.application.logDebugActivity(this.identifier,r,n)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new Vr(this,this.dispatcher),this.valueObserver=new _r(this,this.controller),this.targetObserver=new qr(this,this),this.outletObserver=new Jr(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(r){this.handleError(r,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,r={}){const{identifier:n,controller:i,element:o}=this;r=Object.assign({identifier:n,controller:i,element:o},r),this.application.handleError(e,`Error ${t}`,r)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,r){this.invokeControllerMethod(`${Se(r)}OutletConnected`,e,t)}outletDisconnected(e,t,r){this.invokeControllerMethod(`${Se(r)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){const r=this.controller;typeof r[e]=="function"&&r[e](...t)}}function Xr(s){return Gr(s,Zr(s))}function Gr(s,e){const t=tn(s),r=Qr(s.prototype,e);return Object.defineProperties(t.prototype,r),t}function Zr(s){return Y(s,"blessings").reduce((t,r)=>{const n=r(s);for(const i in n){const o=t[i]||{};t[i]=Object.assign(o,n[i])}return t},{})}function Qr(s,e){return en(e).reduce((t,r)=>{const n=Yr(s,e,r);return n&&Object.assign(t,{[r]:n}),t},{})}function Yr(s,e,t){const r=Object.getOwnPropertyDescriptor(s,t);if(!(r&&"value"in r)){const i=Object.getOwnPropertyDescriptor(e,t).value;return r&&(i.get=r.get||i.get,i.set=r.set||i.set),i}}const en=typeof Object.getOwnPropertySymbols=="function"?s=>[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)]:Object.getOwnPropertyNames,tn=(()=>{function s(t){function r(){return Reflect.construct(t,arguments,new.target)}return r.prototype=Object.create(t.prototype,{constructor:{value:r}}),Reflect.setPrototypeOf(r,t),r}function e(){const r=s(function(){this.a.call(this)});return r.prototype.a=function(){},new r}try{return e(),s}catch{return r=>class extends r{}}})();function sn(s){return{identifier:s.identifier,controllerConstructor:Xr(s.controllerConstructor)}}class rn{constructor(e,t){this.application=e,this.definition=sn(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){const t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){const t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new Wr(this,e),this.contextsByScope.set(e,t)),t}}class nn{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){const t=this.data.get(this.getDataKey(e))||"";return Fr(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}}class on{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){const t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){const r=this.getAttributeNameForKey(e);return this.element.setAttribute(r,t),this.get(e)}has(e){const t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){const t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${Pt(e)}`}}class an{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,r){let n=this.warnedKeysByObject.get(e);n||(n=new Set,this.warnedKeysByObject.set(e,n)),n.has(t)||(n.add(t),this.logger.warn(r,e))}}function Me(s,e){return`[${s}~="${e}"]`}class cn{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,r)=>t||this.findTarget(r)||this.findLegacyTarget(r),void 0)}findAll(...e){return e.reduce((t,r)=>[...t,...this.findAllTargets(r),...this.findAllLegacyTargets(r)],[])}findTarget(e){const t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){const t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){const t=this.schema.targetAttributeForScope(this.identifier);return Me(t,e)}findLegacyTarget(e){const t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){const t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(r=>this.deprecate(r,e))}getLegacySelectorForTargetName(e){const t=`${this.identifier}.${e}`;return Me(this.schema.targetAttribute,t)}deprecate(e,t){if(e){const{identifier:r}=this,n=this.schema.targetAttribute,i=this.schema.targetAttributeForScope(r);this.guide.warn(e,`target:${t}`,`Please replace ${n}="${r}.${t}" with ${i}="${t}". The ${n} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}}class ln{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,r)=>t||this.findOutlet(r),void 0)}findAll(...e){return e.reduce((t,r)=>[...t,...this.findAllOutlets(r)],[])}getSelectorForOutletName(e){const t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){const t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){const t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(n=>this.matchesElement(n,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(n=>this.matchesElement(n,e,t))}matchesElement(e,t,r){const n=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&n.split(" ").includes(r)}}class Le{constructor(e,t,r,n){this.targets=new cn(this),this.classes=new nn(this),this.data=new on(this),this.containsElement=i=>i.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=r,this.guide=new an(n),this.outlets=new ln(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return Me(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new Le(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class un{constructor(e,t,r){this.element=e,this.schema=t,this.delegate=r,this.valueListObserver=new Ut(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){const{element:t,content:r}=e;return this.parseValueForElementAndIdentifier(t,r)}parseValueForElementAndIdentifier(e,t){const r=this.fetchScopesByIdentifierForElement(e);let n=r.get(t);return n||(n=this.delegate.createScopeForElementAndIdentifier(e,t),r.set(t,n)),n}elementMatchedValue(e,t){const r=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,r),r==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){const r=this.scopeReferenceCounts.get(t);r&&(this.scopeReferenceCounts.set(t,r-1),r==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}class hn{constructor(e){this.application=e,this.scopeObserver=new un(this.element,this.schema,this),this.scopesByIdentifier=new j,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);const t=new rn(this.application,e);this.connectModule(t);const r=e.controllerConstructor.afterLoad;r&&r.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){const t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){const r=this.modulesByIdentifier.get(t);if(r)return r.contexts.find(n=>n.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){const r=this.scopeObserver.parseValueForElementAndIdentifier(e,t);r?this.scopeObserver.elementMatchedValue(r.element,r):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,r){this.application.handleError(e,t,r)}createScopeForElementAndIdentifier(e,t){return new Le(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(r=>e.connectContextForScope(r))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(r=>e.disconnectContextForScope(r))}}const dn={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:s=>`data-${s}-target`,outletAttributeForScope:(s,e)=>`data-${s}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},it("abcdefghijklmnopqrstuvwxyz".split("").map(s=>[s,s]))),it("0123456789".split("").map(s=>[s,s])))};function it(s){return s.reduce((e,[t,r])=>Object.assign(Object.assign({},e),{[t]:r}),{})}class fn{constructor(e=document.documentElement,t=dn){this.logger=console,this.debug=!1,this.logDebugActivity=(r,n,i={})=>{this.debug&&this.logFormattedMessage(r,n,i)},this.element=e,this.schema=t,this.dispatcher=new vr(this),this.router=new hn(this),this.actionDescriptorFilters=Object.assign({},Or)}static start(e,t){const r=new this(e,t);return r.start(),r}async start(){await pn(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(n=>{n.controllerConstructor.shouldLoad&&this.router.loadDefinition(n)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(n=>this.router.unloadIdentifier(n))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){const r=this.router.getContextForElementAndIdentifier(e,t);return r?r.controller:null}handleError(e,t,r){var n;this.logger.error(`%s

%o

%o`,t,e,r),(n=window.onerror)===null||n===void 0||n.call(window,t,"",0,0,e)}logFormattedMessage(e,t,r={}){r=Object.assign({application:this},r),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},r)),this.logger.groupEnd()}}function pn(){return new Promise(s=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s()})}function mn(s){return Y(s,"classes").reduce((t,r)=>Object.assign(t,gn(r)),{})}function gn(s){return{[`${s}Class`]:{get(){const{classes:e}=this;if(e.has(s))return e.get(s);{const t=e.getAttributeName(s);throw new Error(`Missing attribute "${t}"`)}}},[`${s}Classes`]:{get(){return this.classes.getAll(s)}},[`has${Q(s)}Class`]:{get(){return this.classes.has(s)}}}}function yn(s){return Y(s,"outlets").reduce((t,r)=>Object.assign(t,bn(r)),{})}function ot(s,e,t){return s.application.getControllerForElementAndIdentifier(e,t)}function at(s,e,t){let r=ot(s,e,t);if(r||(s.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),r=ot(s,e,t),r))return r}function bn(s){const e=Se(s);return{[`${e}Outlet`]:{get(){const t=this.outlets.find(s),r=this.outlets.getSelectorForOutletName(s);if(t){const n=at(this,t,s);if(n)return n;throw new Error(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${e}Outlets`]:{get(){const t=this.outlets.findAll(s);return t.length>0?t.map(r=>{const n=at(this,r,s);if(n)return n;console.warn(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`,r)}).filter(r=>r):[]}},[`${e}OutletElement`]:{get(){const t=this.outlets.find(s),r=this.outlets.getSelectorForOutletName(s);if(t)return t;throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(s)}},[`has${Q(e)}Outlet`]:{get(){return this.outlets.has(s)}}}}function wn(s){return Y(s,"targets").reduce((t,r)=>Object.assign(t,En(r)),{})}function En(s){return{[`${s}Target`]:{get(){const e=this.targets.find(s);if(e)return e;throw new Error(`Missing target element "${s}" for "${this.identifier}" controller`)}},[`${s}Targets`]:{get(){return this.targets.findAll(s)}},[`has${Q(s)}Target`]:{get(){return this.targets.has(s)}}}}function vn(s){const e=Kr(s,"values"),t={valueDescriptorMap:{get(){return e.reduce((r,n)=>{const i=_t(n,this.identifier),o=this.data.getAttributeNameForKey(i.key);return Object.assign(r,{[o]:i})},{})}}};return e.reduce((r,n)=>Object.assign(r,On(n)),t)}function On(s,e){const t=_t(s,e),{key:r,name:n,reader:i,writer:o}=t;return{[n]:{get(){const c=this.data.get(r);return c!==null?i(c):t.defaultValue},set(c){c===void 0?this.data.delete(r):this.data.set(r,o(c))}},[`has${Q(n)}`]:{get(){return this.data.has(r)||t.hasCustomDefaultValue}}}}function _t([s,e],t){return Cn({controller:t,token:s,typeDefinition:e})}function ue(s){switch(s){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function J(s){switch(typeof s){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(s))return"array";if(Object.prototype.toString.call(s)==="[object Object]")return"object"}function Tn(s){const{controller:e,token:t,typeObject:r}=s,n=st(r.type),i=st(r.default),o=n&&i,c=n&&!i,d=!n&&i,u=ue(r.type),l=J(s.typeObject.default);if(c)return u;if(d)return l;if(u!==l){const p=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${p}" must match the defined type "${u}". The provided default value of "${r.default}" is of type "${l}".`)}if(o)return u}function An(s){const{controller:e,token:t,typeDefinition:r}=s,i=Tn({controller:e,token:t,typeObject:r}),o=J(r),c=ue(r),d=i||o||c;if(d)return d;const u=e?`${e}.${r}`:t;throw new Error(`Unknown value type "${u}" for "${t}" value`)}function Sn(s){const e=ue(s);if(e)return ct[e];const t=Ce(s,"default"),r=Ce(s,"type"),n=s;if(t)return n.default;if(r){const{type:i}=n,o=ue(i);if(o)return ct[o]}return s}function Cn(s){const{token:e,typeDefinition:t}=s,r=`${Pt(e)}-value`,n=An(s);return{type:n,key:r,name:Re(r),get defaultValue(){return Sn(t)},get hasCustomDefaultValue(){return J(t)!==void 0},reader:Mn[n],writer:lt[n]||lt.default}}const ct={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Mn={array(s){const e=JSON.parse(s);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${s}" of type "${J(e)}"`);return e},boolean(s){return!(s=="0"||String(s).toLowerCase()=="false")},number(s){return Number(s.replace(/_/g,""))},object(s){const e=JSON.parse(s);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${s}" of type "${J(e)}"`);return e},string(s){return s}},lt={default:Fn,array:ut,object:ut};function ut(s){return JSON.stringify(s)}function Fn(s){return`${s}`}class B{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:r={},prefix:n=this.identifier,bubbles:i=!0,cancelable:o=!0}={}){const c=n?`${n}:${e}`:e,d=new CustomEvent(c,{detail:r,bubbles:i,cancelable:o});return t.dispatchEvent(d),d}}B.blessings=[mn,wn,vn,yn];B.targets=[];B.outlets=[];B.values={};class xn extends B{static targets=["addModal","editModal","deleteModal","brandForm","logoInput","logoPreview","brandNameInput","deleteConfirmInput","submitButton"];static values={brandName:String,brandLogo:String,deleteUrl:String,redirectUrl:String,hasErrors:Boolean,modalMode:String};connect(){this.isSubmitting=!1,this.formErrors={},this.deleteConfirmName="",this.hasErrorsValue&&(this.modalModeValue==="create"?this.openAdd():this.modalModeValue==="edit"&&this.openEdit()),this.brandLogoValue&&this.hasLogoPreviewTarget&&this.showLogoPreview(this.brandLogoValue)}openAdd(){this.addModalTarget.classList.remove("tw-hidden"),this.addModalTarget.style.display="flex",this.addModalTarget.style.alignItems="center",this.addModalTarget.style.justifyContent="center",this.formErrors={},setTimeout(()=>{this.brandNameInputTarget?.focus()},100)}openEdit(){this.editModalTarget.classList.remove("tw-hidden"),this.editModalTarget.style.display="flex",this.editModalTarget.style.alignItems="center",this.editModalTarget.style.justifyContent="center",this.formErrors={},setTimeout(()=>{this.brandNameInputTarget?.focus()},100)}openDelete(){this.deleteModalTarget.classList.remove("tw-hidden"),this.deleteModalTarget.style.display="flex",this.deleteModalTarget.style.alignItems="center",this.deleteModalTarget.style.justifyContent="center",this.deleteConfirmName="",setTimeout(()=>{this.deleteConfirmInputTarget?.focus()},100)}closeAdd(){this.addModalTarget.classList.add("tw-hidden"),this.addModalTarget.style.display="none",this.resetForm()}closeEdit(){this.editModalTarget.classList.add("tw-hidden"),this.editModalTarget.style.display="none",this.resetLogoPreview(),this.formErrors={}}closeDelete(){this.deleteModalTarget.classList.add("tw-hidden"),this.deleteModalTarget.style.display="none",this.deleteConfirmName=""}closeOnBackdrop(e){e.target===e.currentTarget&&(this.hasAddModalTarget&&!this.addModalTarget.classList.contains("tw-hidden")?this.closeAdd():this.hasEditModalTarget&&!this.editModalTarget.classList.contains("tw-hidden")?this.closeEdit():this.hasDeleteModalTarget&&!this.deleteModalTarget.classList.contains("tw-hidden")&&this.closeDelete())}stopPropagation(e){e.stopPropagation()}resetForm(){this.hasBrandFormTarget&&this.brandFormTarget.reset(),this.clearLogoPreview(),this.formErrors={}}previewLogo(e){const t=e.target.files[0];if(!t)return;if(t.size>2*1024*1024){window.showToast&&window.showToast("Logo khng c ln hn 2MB","error"),e.target.value="";return}if(!["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml"].includes(t.type)){window.showToast&&window.showToast("Ch chp nhn file nh (JPEG, PNG, GIF, SVG)","error"),e.target.value="";return}const n=new FileReader;n.onload=i=>{this.showLogoPreview(i.target.result)},n.readAsDataURL(t)}showLogoPreview(e){this.hasLogoPreviewTarget&&(this.logoPreviewTarget.src=e,this.logoPreviewTarget.closest("[data-logo-container]").classList.remove("tw-hidden"),this.logoPreviewTarget.closest("[data-logo-container]").parentElement.querySelector("[data-logo-placeholder]")?.classList.add("tw-hidden"))}clearLogoPreview(e){e&&e.stopPropagation(),this.hasLogoPreviewTarget&&(this.logoPreviewTarget.src="",this.logoPreviewTarget.closest("[data-logo-container]").classList.add("tw-hidden"),this.logoPreviewTarget.closest("[data-logo-container]").parentElement.querySelector("[data-logo-placeholder]")?.classList.remove("tw-hidden")),this.hasLogoInputTarget&&(this.logoInputTarget.value="")}resetLogoPreview(){this.brandLogoValue?this.showLogoPreview(this.brandLogoValue):this.clearLogoPreview()}async submitBrandForm(e){e.preventDefault(),this.isSubmitting=!0,this.formErrors={},this.updateSubmitButton(!0);const t=e.target,r=new FormData(t);try{const n=await fetch(t.action,{method:"POST",body:r,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}),i=await n.json();if(n.ok)this.hasAddModalTarget&&!this.addModalTarget.classList.contains("tw-hidden")?this.closeAdd():this.hasEditModalTarget&&!this.editModalTarget.classList.contains("tw-hidden")&&this.closeEdit(),window.showNotification&&window.showNotification(i.message,"success"),i.redirect?window.location.href=i.redirect:window.location.reload();else if(console.error("Validation failed:",n.status,i),i.errors)this.formErrors=i.errors,console.log("Form errors:",this.formErrors),Object.keys(i.errors).forEach(o=>{i.errors[o].forEach(d=>{window.showToast&&window.showToast(d,"error")})});else{const o=i.message||"C li xy ra. Vui lng th li.";window.showToast&&window.showToast(o,"error")}}catch(n){console.error("Error:",n),window.showToast&&window.showToast("C li xy ra. Vui lng th li.","error")}finally{this.isSubmitting=!1,this.updateSubmitButton(!1)}}updateSubmitButton(e){if(this.hasSubmitButtonTarget){this.submitButtonTarget.disabled=e;const t=this.submitButtonTarget.querySelector("[data-spinner]"),r=this.submitButtonTarget.querySelector("[data-icon]"),n=this.submitButtonTarget.querySelector("[data-text]");t&&t.classList.toggle("tw-hidden",!e),r&&r.classList.toggle("tw-hidden",e),n&&(n.textContent=e?"ang x l...":n.dataset.originalText)}}updateDeleteConfirmName(e){this.deleteConfirmName=e.target.value}async submitDeleteBrand(e){if(e.preventDefault(),this.deleteConfirmName!==this.brandNameValue){window.showToast&&window.showToast("Tn thng hiu khng chnh xc!","error");return}this.isSubmitting=!0;try{const t=await fetch(this.deleteUrlValue,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}),r=await t.json();t.ok?(this.closeDelete(),window.showNotification&&window.showNotification(r.message,"success"),setTimeout(()=>{window.location.href=r.redirect||this.redirectUrlValue},500)):window.showToast&&window.showToast(r.message||"C li xy ra. Vui lng th li.","error")}catch(t){console.error("Error:",t),window.showToast&&window.showToast("C li xy ra. Vui lng th li.","error")}finally{this.isSubmitting=!1}}}class Nn extends B{static targets=["inviteModal","editModal","deleteModal","roleInput","editForm","deleteForm","editMemberIdInput","editRoleAdmin","editRoleEditor","deleteMemberName","rootPerm","stemPerm","crownPerm"];static values={currentRole:{type:String,default:"editor"}};connect(){this.formErrors={},this.updatePermissionDisplay("editor")}openInvite(){this.inviteModalTarget.classList.remove("tw-hidden"),this.inviteModalTarget.style.display="flex",this.inviteModalTarget.style.alignItems="center",this.inviteModalTarget.style.justifyContent="center",this.formErrors={}}openEdit(e){const t=e.currentTarget,r=t.dataset.memberId,n=t.dataset.memberRole,i=this.editFormTarget.action;this.editFormTarget.action=`${i}/${r}`,this.editMemberIdInputTarget.value=r,n==="admin"?this.editRoleAdminTarget.checked=!0:this.editRoleEditorTarget.checked=!0,this.editModalTarget.classList.remove("tw-hidden"),this.editModalTarget.style.display="flex",this.editModalTarget.style.alignItems="center",this.editModalTarget.style.justifyContent="center",this.formErrors={}}openDelete(e){const t=e.currentTarget,r=t.dataset.memberId,n=t.dataset.memberName,i=this.deleteFormTarget.action;this.deleteFormTarget.action=`${i}/${r}`,this.deleteMemberNameTarget.textContent=n,this.deleteModalTarget.classList.remove("tw-hidden"),this.deleteModalTarget.style.display="flex",this.deleteModalTarget.style.alignItems="center",this.deleteModalTarget.style.justifyContent="center"}closeInvite(){this.inviteModalTarget.classList.add("tw-hidden"),this.inviteModalTarget.style.display="none",this.formErrors={}}closeEdit(){this.editModalTarget.classList.add("tw-hidden"),this.editModalTarget.style.display="none",this.formErrors={}}closeDelete(){this.deleteModalTarget.classList.add("tw-hidden"),this.deleteModalTarget.style.display="none"}stopPropagation(e){e.stopPropagation()}updatePermissions(e){const t=e.target.value;this.updatePermissionDisplay(t)}updatePermissionDisplay(e){if(!this.hasRootPermTarget||!this.hasStemPermTarget||!this.hasCrownPermTarget)return;const t={admin:{root:{text:"Ton quyn",class:"tw-bg-green-100 tw-text-green-700"},stem:{text:"Ton quyn",class:"tw-bg-green-100 tw-text-green-700"},crown:{text:"Ton quyn",class:"tw-bg-green-100 tw-text-green-700"}},editor:{root:{text:"Ch xem",class:"tw-bg-gray-100 tw-text-gray-600"},stem:{text:"Ch xem",class:"tw-bg-gray-100 tw-text-gray-600"},crown:{text:"Ton quyn",class:"tw-bg-green-100 tw-text-green-700"}}},r=t[e]||t.editor;this.rootPermTarget.textContent=r.root.text,this.rootPermTarget.className=`tw-text-xs tw-font-medium tw-px-2 tw-py-1 tw-rounded-full ${r.root.class}`,this.stemPermTarget.textContent=r.stem.text,this.stemPermTarget.className=`tw-text-xs tw-font-medium tw-px-2 tw-py-1 tw-rounded-full ${r.stem.class}`,this.crownPermTarget.textContent=r.crown.text,this.crownPermTarget.className=`tw-text-xs tw-font-medium tw-px-2 tw-py-1 tw-rounded-full ${r.crown.class}`}}class kn extends B{static targets=["menu"];connect(){this.closeOnClickOutside=this.closeOnClickOutside.bind(this),document.addEventListener("click",this.closeOnClickOutside)}disconnect(){document.removeEventListener("click",this.closeOnClickOutside)}toggle(e){e.stopPropagation(),this.menuTarget.classList.toggle("tw-hidden")}close(){this.menuTarget.classList.add("tw-hidden")}closeOnClickOutside(e){this.element.contains(e.target)||this.close()}}class Rn extends B{static values={status:String,checkUrl:String,maxChecks:{type:Number,default:60},intervalMs:{type:Number,default:5e3}};connect(){this.isChecking=!1,this.pollingInterval=null,this.checkCount=0,this.timeElapsed=0,this.statusValue==="pending"&&this.startPolling(),this.handleVisibilityChange=this.handleVisibilityChange.bind(this),document.addEventListener("visibilitychange",this.handleVisibilityChange),this.handleBeforeUnload=this.handleBeforeUnload.bind(this),window.addEventListener("beforeunload",this.handleBeforeUnload)}disconnect(){this.stopPolling(),document.removeEventListener("visibilitychange",this.handleVisibilityChange),window.removeEventListener("beforeunload",this.handleBeforeUnload)}handleVisibilityChange(){document.hidden?this.stopPolling():this.statusValue==="pending"&&(this.checkCount=0,this.timeElapsed=0,this.startPolling())}handleBeforeUnload(){this.stopPolling()}async checkPaymentStatus(){if(this.statusValue==="pending"){this.isChecking=!0,this.updateCheckingState(!0);try{const t=await(await fetch(this.checkUrlValue,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).json();t.completed&&(this.statusValue=t.status,this.stopPolling(),window.showNotification&&window.showNotification(t.message,"success"),this.showCompletedView(),setTimeout(()=>{window.location.href=t.redirect},2e3))}catch(e){console.error("Error checking payment status:",e)}finally{setTimeout(()=>{this.isChecking=!1,this.updateCheckingState(!1)},500)}}}startPolling(){this.pollingInterval||(this.checkPaymentStatus(),this.pollingInterval=setInterval(()=>{if(this.checkCount++,this.timeElapsed=this.checkCount*(this.intervalMsValue/1e3),this.updateTimeElapsed(),this.checkCount>=this.maxChecksValue){this.stopPolling();return}this.checkPaymentStatus()},this.intervalMsValue))}stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)}updateCheckingState(e){const t=this.element.querySelector("[data-payment-status-bar]");t&&(e?t.classList.add("tw-opacity-75"):t.classList.remove("tw-opacity-75"))}updateTimeElapsed(){const e=this.element.querySelector("[data-payment-time-elapsed]");if(e&&this.timeElapsed>0){const t=this.element.querySelector("[data-payment-time-container]");t&&t.classList.remove("tw-hidden"),e.textContent=this.formatTime(this.timeElapsed)}}formatTime(e){const t=Math.floor(e/60),r=e%60;return t>0?`${t}m ${r}s`:`${r}s`}showCompletedView(){const e=this.element.querySelector("[data-payment-pending]");e&&e.classList.add("tw-hidden");const t=this.element.querySelector("[data-payment-completed]");t&&(t.classList.remove("tw-hidden"),t.classList.add("slide-up"))}}const ee=fn.start();ee.register("brand-form",xn);ee.register("member-management",Nn);ee.register("dropdown",kn);ee.register("payment-status",Rn);window.Stimulus=ee;
